<h1>Veamos si resulta</h1>

<div class="row">
  <% @trips.each do |trip| %>
    <div class="col-12 col-lg-3 card">
      <div class="card-body">
        <h3 class="card-title">From: <%= trip.starting_point %></h3>
        <h3 class="card-title">To: <%= trip.end_point %></h3>
        <ul>
          <li>NºPassengers: <%= trip.number_of_passengers %></li>
          <li>Start time: <%= trip.departure_time %></li>
        </ul>
        <h5>Driver:</h5>
        <p><%= trip.user.first_name %> <%= trip.user.last_name %></p>
        <% if policy(trip).show? %>
          <%= link_to 'More Info', trip, class: "btn btn-primary"%>
        <% end %>
        <% if policy(trip).edit? %>
          <%= link_to 'Edit', edit_trip_path(trip), class: "btn btn-secondary"%>
        <% end %>
        <% if policy(trip).destroy? %>
          <%= link_to 'Destroy', trip, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-secondary" %>
        <% end %>
      </div>
    </div>
    <div class="col-12 col-lg-3 card">
      <div class="card-body">
        <% trip.bookings.each do |booking| %>
          <ul>
            <li>Status: <%= booking.status %></li>
            <li>NºPassengers <%= booking.passengers %></li>
            <li>Passengers: <%= booking.user.first_name %> <%= booking.user.last_name %></li>
          </ul>
          <%= link_to 'Accept', accept_booking_path(booking), method: :put, class: "btn btn-secondary"%>
          <%= link_to 'Reject', reject_booking_path(booking), method: :put, class: "btn btn-secondary"%>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
